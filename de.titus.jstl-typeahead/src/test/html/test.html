<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Typeahead</title>
<link rel="stylesheet" type="text/css" href="css/bootstrap.3.3.6.min.css" />
<link rel="stylesheet" type="text/css" href="css/typeahead.css" />
<link rel="stylesheet" type="text/css" href="css/costum.css" />

</head>
<body>
	<input id="test-1" type="text" class="jstl-typeahead form-control"
		typeahead-input-action="testSearch"
		typeahead-template="templates/typeahead.tpl.html"
		typeahead-display="name" typeahead-display-marker="" typeahead-max-suggestions="5"/>


	<div class="container">
		<div class="input-group has-success has-feedback">
			<span class="input-group-addon"><i
				class="glyphicon glyphicon-user"></i></span> <input type="text"
				class="jstl-typeahead form-control"
				typeahead-input-action="testSearch"
				typeahead-template="templates/typeahead.tpl.html"
				typeahead-display="name + '(' + name + ')'" typeahead-display-marker=""
				typeahead-selection-action="selectValue" /> <span
				class="glyphicon glyphicon-ok form-control-feedback"></span>
		</div>
	</div>
	<h3>Strings only</h3>
	<div class="container">
		<div class="input-group has-success has-feedback">
			<span class="input-group-addon"><i
				class="glyphicon glyphicon-user"></i></span> <input type="text"
				class="jstl-typeahead form-control"
				typeahead-input-action="testSearchStringsOnly"
				typeahead-template="templates/typeahead.tpl.html"
				typeahead-display-marker=""
				typeahead-selection-action="selectValue"
				typeahead-keep-input="" /> <span
				class="glyphicon glyphicon-ok form-control-feedback"></span>
		</div>
	</div>
	<h3>Typeahed at a form tag</h3>
	<form onsubmit="alert('submit triggert')">
		<div class="input-group has-success has-feedback">
			<span class="input-group-addon"><i
				class="glyphicon glyphicon-user"></i></span> <input type="text"
				class="jstl-typeahead form-control"
				typeahead-input-action="testSearch"
				typeahead-template="templates/typeahead.tpl.html"
				typeahead-display="name + '(' + name + ')'" typeahead-display-marker=""
				typeahead-selection-action="selectValue" /> <span
				class="glyphicon glyphicon-ok form-control-feedback"></span>
		</div>
		<input type="submit" value="test submit">
	</form>
	
	
	<script type="text/javascript">
		var GIVENNAMES = [
			"Peter",
			"Anna",
			"Nadine",
			"Frank",
			"Christian",
			"Chris",
			"Stein",
			"Jacob",
			"Sophia",
			"Mason",
			"Isabella",
			"William",
			"Emma",
			"Jayden",
			"Olivia"
		];
	
		var FAMILYNAMES = [
			"Anderson",
			"Archer",
			"Armstrong",
			"Baker",
			"Barber",
			"Bennett",
			"Bishop",
			"Black",
			"Blair",
			"Brewster",
			"Brown",
			"Carter",
			"Chaplin",
			"Coleman",
			"Collister",
			"Connor",
			"Cunningham",
			"Dearing",
			"Edison",
			"Edwards",
			"Eliot",
			"Franklin",
			"Garcia",
			"Hanson",
			"Harper",
			"Harsen",
			"Havering",
			"Hilton",
			"Hobbs",
			"Jackson",
			"Jameson",
			"Jenkins",
			"Johnson",
			"King",
			"Malone",
			"Martin",
			"Mason",
			"Mathewson",
			"Michaels",
			"Miller",
			"Moore",
			"Muller",
			"Nolan",
			"Norris",
			"Parker",
			"Rodriguez",
			"Sawyer",
			"Shoemaker",
			"Smith",
			"Stark",
			"Stevenson",
			"Stone",
			"Thomas",
			"Thompson",
			"Warren",
			"Ward",
			"Wayne",
			"West",
			"White",
			"Young"
		];
	
		function getRandomInt(max) {
			return Math.floor(Math.random() * max);
		};
		
		var TESTVALUES = [];
		var TESTVALUEMAP = {};
        while (TESTVALUES.length < 100){
        	var givenname = GIVENNAMES[getRandomInt(GIVENNAMES.length)];
        	var familyname = FAMILYNAMES[getRandomInt(FAMILYNAMES.length)];
        	var key = givenname + familyname;
        	if(TESTVALUEMAP[key] == undefined){
        		console.log("new name with key: \"" +  key + "\"!");
        		TESTVALUEMAP[key] = "";        	
		        TESTVALUES.push({
		            name : givenname + " " + familyname,
		            value : {givenname : givenname, familyname: familyname}
		        });
        	}
        	else
        		console.log("name with key: \"" +  key + "\" already exists!");
        } 
        
        TESTVALUEMAP = undefined;
        
        function testSearch(aValue, aCallback) {
        	var value = aValue.toLowerCase();
        	var results = [];
        	for(var i = 0; i < TESTVALUES.length &&  results.length < 20; i++){
        		var item = TESTVALUES[i];
        		if(item.name.toLowerCase().search(value) >= 0)
        			results.push(item);        		
        	}
        	
	        aCallback(results)
        };
        
        function testSearchStringsOnly(aValue, aCallback) {
        	var value = aValue.toLowerCase();
        	var results = [];
        	for(var i = 0; i < TESTVALUES.length &&  results.length < 20; i++){
        		var item = TESTVALUES[i];
        		if(item.name.toLowerCase().search(value) >= 0)
        			results.push(item.name);        		
        	}
        	
        	console.log(results);
	        aCallback(results)
        };
        
        function selectValue(aItem){
        	console.log("select value");
        	console.log(aItem);
        };
        
        function setSelectedValue(){
        	$("#test-1").de_titus_Typeahead().setSelectedData(TESTVALUES[0]);
        }
	</script>
	<script type="text/javascript" src="js/libs/jquery-2.2.4.min.js"></script>
	<script type="text/javascript" src="js/libs/de.titus.jquery.plugins.4.0.2.min.js"></script>
	<script type="text/javascript" src="js/libs/de.titus.jstl-typeahead.js"></script>
</body>
</html>