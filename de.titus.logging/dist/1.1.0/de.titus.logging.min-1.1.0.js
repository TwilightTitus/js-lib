de.titus.core.Namespace.create("de.titus.logging.LogLevel",function(){de.titus.logging.LogLevel=function(aOrder,aTitle){this.order=aOrder;this.title=aTitle;};de.titus.logging.LogLevel.prototype.isIncluded=function(aLogLevel){return this.order>=aLogLevel.order;};de.titus.logging.LogLevel.getLogLevel=function(aLogLevelName){if(aLogLevelName==undefined){return de.titus.logging.LogLevel.NOLOG;}var levelName=aLogLevelName.toUpperCase();return de.titus.logging.LogLevel[levelName];};de.titus.logging.LogLevel.NOLOG=new de.titus.logging.LogLevel(0,"NOLOG");de.titus.logging.LogLevel.ERROR=new de.titus.logging.LogLevel(1,"ERROR");de.titus.logging.LogLevel.WARN=new de.titus.logging.LogLevel(2,"WARN");de.titus.logging.LogLevel.INFO=new de.titus.logging.LogLevel(3,"INFO");de.titus.logging.LogLevel.DEBUG=new de.titus.logging.LogLevel(4,"DEBUG");de.titus.logging.LogLevel.TRACE=new de.titus.logging.LogLevel(5,"TRACE");});de.titus.core.Namespace.create("de.titus.logging.LogAppender",function(){de.titus.logging.LogAppender=function(){};
de.titus.logging.LogAppender.prototype.formatedDateString=function(aDate){if(aDate==undefined){return"";}var dateString="";dateString+=aDate.getFullYear()+".";if(aDate.getMonth()<10){dateString+="0"+aDate.getMonth();}else{dateString+=aDate.getMonth();}dateString+=".";if(aDate.getDate()<10){dateString+="0"+aDate.getDate();}else{dateString+=aDate.getDate();}dateString+=" ";if(aDate.getHours()<10){dateString+="0"+aDate.getHours();}else{dateString+=aDate.getHours();}dateString+=":";if(aDate.getMinutes()<10){dateString+="0"+aDate.getMinutes();}else{dateString+=aDate.getMinutes();}dateString+=":";if(aDate.getSeconds()<10){dateString+="0"+aDate.getSeconds();}else{dateString+=aDate.getSeconds();}dateString+=":";if(aDate.getMilliseconds()<10){dateString+="00"+aDate.getMilliseconds();}if(aDate.getMilliseconds()<100){dateString+="0"+aDate.getMilliseconds();}else{dateString+=aDate.getMilliseconds();}return dateString;};de.titus.logging.LogAppender.prototype.logMessage=function(aMessage,anException,aLoggerName,aDate,aLogLevel){};
});de.titus.core.Namespace.create("de.titus.logging.Logger",function(){de.titus.logging.Logger=function(aName,aLogLevel,aLogAppenders){this.name=aName;this.logLevel=aLogLevel;this.logAppenders=aLogAppenders;};de.titus.logging.Logger.prototype.isErrorEnabled=function(){return this.logLevel.isIncluded(de.titus.logging.LogLevel.ERROR);};de.titus.logging.Logger.prototype.isWarnEnabled=function(){return this.logLevel.isIncluded(de.titus.logging.LogLevel.WARN);};de.titus.logging.Logger.prototype.isInfoEnabled=function(){return this.logLevel.isIncluded(de.titus.logging.LogLevel.INFO);};de.titus.logging.Logger.prototype.isDebugEnabled=function(){return this.logLevel.isIncluded(de.titus.logging.LogLevel.DEBUG);};de.titus.logging.Logger.prototype.isTraceEnabled=function(){return this.logLevel.isIncluded(de.titus.logging.LogLevel.TRACE);};de.titus.logging.Logger.prototype.logError=function(aMessage,aException){if(this.isErrorEnabled()){this.log(aMessage,aException,de.titus.logging.LogLevel.ERROR);
}};de.titus.logging.Logger.prototype.logWarn=function(aMessage,aException){if(this.isWarnEnabled()){this.log(aMessage,aException,de.titus.logging.LogLevel.WARN);}};de.titus.logging.Logger.prototype.logInfo=function(aMessage,aException){if(this.isInfoEnabled()){this.log(aMessage,aException,de.titus.logging.LogLevel.INFO);}};de.titus.logging.Logger.prototype.logDebug=function(aMessage,aException){if(this.isDebugEnabled()){this.log(aMessage,aException,de.titus.logging.LogLevel.DEBUG);}};de.titus.logging.Logger.prototype.logTrace=function(aMessage,aException){if(this.isTraceEnabled()){this.log(aMessage,aException,de.titus.logging.LogLevel.TRACE);}};de.titus.logging.Logger.prototype.log=function(aMessage,anException,aLogLevel){if(this.logAppenders==undefined){return;}if(this.logAppenders.length>0){for(var i=0;i<this.logAppenders.length;i++){this.logAppenders[i].logMessage(aMessage,anException,this.name,new Date(),aLogLevel);}}};});de.titus.core.Namespace.create("de.titus.logging.LoggerRegistry",function(){de.titus.logging.LoggerRegistry=function(){this.loggers={};
};de.titus.logging.LoggerRegistry.prototype.addLogger=function(aLogger){if(aLogger==undefined){return;}if(this.loggers[aLogger.name]==undefined){this.loggers[aLogger.name]=aLogger;}};de.titus.logging.LoggerRegistry.prototype.getLogger=function(aLoggerName){if(aLoggerName==undefined){return;}return this.loggers[aLoggerName];};de.titus.logging.LoggerRegistry.getInstance=function(){if(de.titus.logging.LoggerRegistry.INSTANCE==undefined){de.titus.logging.LoggerRegistry.INSTANCE=new de.titus.logging.LoggerRegistry();}return de.titus.logging.LoggerRegistry.INSTANCE;};});de.titus.core.Namespace.create("de.titus.logging.LoggerFactory",function(){de.titus.logging.LoggerFactory=function(){this.configs=undefined;this.appenders={};this.loadLazyCounter=0;};de.titus.logging.LoggerFactory.prototype.newLogger=function(aLoggerName){var logger=de.titus.logging.LoggerRegistry.getInstance().getLogger(aLoggerName);if(logger==undefined){var config=this.findConfig(aLoggerName);var logLevel=de.titus.logging.LogLevel.getLogLevel(config.logLevel);
var appenders=this.getAppenders(config.appenders);logger=new de.titus.logging.Logger(aLoggerName,logLevel,appenders);de.titus.logging.LoggerRegistry.getInstance().addLogger(logger);}return logger;};de.titus.logging.LoggerFactory.prototype.getConfig=function(){if(this.configs==undefined){this.updateConfigs();}return this.configs;};de.titus.logging.LoggerFactory.prototype.setConfig=function(aConfig){if(aConfig!=undefined){this.configs=aConfig;this.updateLogger();}};de.titus.logging.LoggerFactory.prototype.updateConfigs=function(aConfig){if(this.configs==undefined){this.configs={};}var configElement=$("[logging-properties]").first();if(configElement!=undefined&&(configElement.length==undefined||configElement.length==1)){var propertyString=configElement.attr("logging-properties");var properties=de.titus.core.SpecialFunctions.doEval(propertyString,{});this.loadConfig(properties);}else{de.titus.logging.LoggerFactory.getInstance().doLoadLazy();}};de.titus.logging.LoggerFactory.prototype.doLoadLazy=function(){if(this.loadLazyCounter>10){return;
}this.loadLazyCounter++;window.setTimeout(function(){de.titus.logging.LoggerFactory.getInstance().loadConfig();},1);};de.titus.logging.LoggerFactory.prototype.loadConfig=function(aConfig){if(aConfig==undefined){this.updateConfigs();}else{if(aConfig.remote){this.loadConfigRemote(aConfig.remote);}else{if(aConfig.data){this.setConfig(aConfig.data.configs);}}}};de.titus.logging.LoggerFactory.prototype.loadConfigRemote=function(aRemoteData){var this_=this;var ajaxSettings={"async":false,"cache":false,"dataType":"json"};ajaxSettings=$.extend(ajaxSettings,aRemoteData);ajaxSettings.success=function(data){this_.setConfig(data.configs);};ajaxSettings.error=function(error){console.log(error);};$.ajax(ajaxSettings);};de.titus.logging.LoggerFactory.prototype.updateLogger=function(){var loggers=de.titus.logging.LoggerRegistry.getInstance().loggers;for(var loggerName in loggers){var logger=loggers[loggerName];var config=this.findConfig(loggerName);var logLevel=de.titus.logging.LogLevel.getLogLevel(config.logLevel);
var appenders=this.getAppenders(config.appenders);logger.logLevel=logLevel;logger.logAppenders=appenders;}};de.titus.logging.LoggerFactory.prototype.findConfig=function(aLoggerName){var defaultConfig={"filter":"","logLevel":"NOLOG","appenders":[]};var actualConfig=undefined;var configs=this.getConfig();for(var i=0;i<configs.length;i++){var config=configs[i];if(this.isConfigActiv(aLoggerName,config,actualConfig)){actualConfig=config;}else{if(config.filter==undefined||config.filter==""){defaultConfig=config;}}if(actualConfig!=undefined&&actualConfig.filter==aLoggerName){return actualConfig;}}return actualConfig||defaultConfig;};de.titus.logging.LoggerFactory.prototype.isConfigActiv=function(aLoggerName,aConfig,anActualConfig){if(anActualConfig!=undefined&&anActualConfig.filter.length>=aConfig.filter.filter){return false;}return aLoggerName.search(aConfig.filter)==0;};de.titus.logging.LoggerFactory.prototype.getAppenders=function(theAppenders){var result=new Array();for(var i=0;i<theAppenders.length;
i++){var appenderString=theAppenders[i];var appender=this.appenders[appenderString];if(appender==undefined){appender=de.titus.core.SpecialFunctions.doEval("new "+appenderString+"();");if(appender!=undefined){this.appenders[appenderString]=appender;}}if(appender!=undefined){result.push(appender);}}return result;};de.titus.logging.LoggerFactory.getInstance=function(){if(de.titus.logging.LoggerFactory.INSTANCE==undefined){de.titus.logging.LoggerFactory.INSTANCE=new de.titus.logging.LoggerFactory();}return de.titus.logging.LoggerFactory.INSTANCE;};});de.titus.core.Namespace.create("de.titus.logging.ConsolenAppender",function(){de.titus.logging.ConsolenAppender=function(){};de.titus.logging.ConsolenAppender.prototype=new de.titus.logging.LogAppender();de.titus.logging.ConsolenAppender.prototype.constructor=de.titus.logging.ConsolenAppender;de.titus.logging.ConsolenAppender.prototype.logMessage=function(aMessage,anException,aLoggerName,aDate,aLogLevel){var log="";if(aDate){log+=log=this.formatedDateString(aDate)+" ";
}log+="***"+aLogLevel.title+"*** "+aLoggerName+"";if(aMessage){log+=" -> "+aMessage;}if(anException){log+=": "+anException;}console.log(log);};});de.titus.core.Namespace.create("de.titus.logging.HtmlAppender",function(){de.titus.logging.HtmlAppender=function(){};de.titus.logging.HtmlAppender.CONTAINER_QUERY="#log";de.titus.logging.HtmlAppender.prototype=new de.titus.logging.LogAppender();de.titus.logging.HtmlAppender.prototype.constructor=de.titus.logging.HtmlAppender;de.titus.logging.HtmlAppender.prototype.logMessage=function(aMessage,anException,aLoggerName,aDate,aLogLevel){var container=$(de.titus.logging.HtmlAppender.CONTAINER_QUERY);if(container==undefined){return;}var log=$("<div />").addClass("log-entry "+aLogLevel.title);var logEntry="";if(aDate){logEntry+=logEntry=this.formatedDateString(aDate)+" ";}logEntry+="***"+aLogLevel.title+"*** "+aLoggerName+"";if(aMessage){logEntry+=" -> "+aMessage;}if(anException){logEntry+=": "+anException;}log.text(logEntry);container.append(log);};
});de.titus.core.Namespace.create("de.titus.logging.MemoryAppender",function(){window.MEMORY_APPENDER_LOG=new Array();de.titus.logging.MemoryAppender=function(){};de.titus.logging.MemoryAppender.prototype=new de.titus.logging.LogAppender();de.titus.logging.MemoryAppender.prototype.constructor=de.titus.logging.MemoryAppender;de.titus.logging.MemoryAppender.prototype.logMessage=function(aMessage,anException,aLoggerName,aDate,aLogLevel){var log={"date":aDate,"logLevel":aLogLevel,"loggerName":aLoggerName,"message":aMessage,"exception":anException};window.MEMORY_APPENDER_LOG.push(log);};});de.titus.core.Namespace.create("de.titus.logging.InteligentBrowserAppender",function(){de.titus.logging.InteligentBrowserAppender=function(){this.appender=undefined;};de.titus.logging.InteligentBrowserAppender.prototype=new de.titus.logging.LogAppender();de.titus.logging.InteligentBrowserAppender.prototype.constructor=de.titus.logging.InteligentBrowserAppender;de.titus.logging.InteligentBrowserAppender.prototype.getAppender=function(){if(this.appender==undefined){var consoleAvalible=true;
try{console.log("Test Logging!");}catch(e){consoleAvalible=false;}if(consoleAvalible){this.appender=new de.titus.logging.ConsolenAppender();}else{if($(de.titus.logging.HtmlAppender.CONTAINER_QUERY)){this.appender=new de.titus.logging.HtmlAppender();}else{this.appender=new de.titus.logging.MemoryAppender();}}}return this.appender;};de.titus.logging.InteligentBrowserAppender.prototype.logMessage=function(aMessage,anException,aLoggerName,aDate,aLogLevel){this.getAppender().logMessage(aMessage,anException,aLoggerName,aDate,aLogLevel);};});