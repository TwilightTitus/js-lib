<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JSTL Samples</title>
<script src="../../libs/jquery-1.11.1.js" type="text/javascript"></script>
<script src="../../dist/3.2.0/de.titus.jquery.plugins.3.2.0.js"	type="text/javascript"></script>
<!-- script src="../../dist/3.0.1/de.titus.jquery.plugins.3.0.1.js"	type="text/javascript"></script -->
<link type="text/css" href="style.css" rel="stylesheet" />


<script type="text/javascript">
	de.titus.logging.LoggerFactory.getInstance().setConfig([
            {
                "filter" : "",
                "logLevel" : "ERROR",
                "appenders" : [
	                "de.titus.logging.ConsolenAppender"
                ]
            }, {
                "filter" : "de.titus",
                "logLevel" : "ERROR",
                "appenders" : [
	                "de.titus.logging.ConsolenAppender"
                ]
            }
    ]);
</script>
</head>
<body >
	<div id="test" jstl-load="load" jstl-success="success"
		jstl-fail="function(){alert('fail')}">
		<div>
			foreach on remote data
			<div jstl-data="jstl-remote.data.json" jstl-data-mode="remote"
				jstl-data-var="newData" jstl-foreach="${newData.list}"
				jstl-foreach-var="listItem" jstl-foreach-status="listStatus">
				<span>${listStatus.index} </span> <span>id: ${listItem.id}</span> <span>name:
					${listItem.name}</span> <span>name: ${newData.jstlTemplate}</span> <br />
			</div>
		</div>


		<div>
			add single attribute<br/> <img jstl-data='jstl-remote.data.json'
				jstl-data-mode="remote"
				jstl-add-attribute="{'name':'src', 'value':testImage}" />
		</div>
		<div>
			add multiple Attribute<br/>
			<div jstl-data='jstl-remote.data.json' jstl-data-mode="remote"
				jstl-add-attribute="${addAttributes}"></div>
		</div>

		<div>
			foreach on data context / it's like run over all properties of an
			Object
			<div jstl-data='jstl-remote.data.json' jstl-data-mode="remote"
				jstl-foreach="${list}" jstl-foreach-var="listItem"
				jstl-foreach-status="listStatus">
				<div jstl-if="${listItem.id != 3}">
					<span>${listStatus.index} </span> <span>id: ${listItem.id}</span> <span>name: ${listItem.name}</span> <span>name: ${jstlTemplate}</span>
				</div>
			</div>
		</div>

		<div>
			foreach on data context / it's like run over all properties of an
			Object
			<div jstl-data='jstl-remote.data.json' jstl-data-mode="remote"
				jstl-foreach="${list}" jstl-foreach-var="listItem"
				jstl-foreach-status="listStatus">
				<div>
					<span>${listStatus.index} </span> <span>id: ${listItem.id}</span> <span>name:
						${listItem.name}</span> <span>name: ${jstlTemplate}</span>
				</div>
			</div>
		</div>


		<div>
			Simple Text replacement
			<div>${test}</div>
			<div>${"test " + test + "!"}</div>
			<div>${testFunction}</div>
		</div>
		<!-- div jstl-if="${boolean}">boolean test</div>
		<div></div>
		<div>
			include tests
			<div jstl-include="jstl-template.html"
				jstl-include-options='{"test": "test"}' jstl-include-mode="append"
				class="${test}">
				<div>append</div>
			</div>
			<div jstl-include="jstl-template.html"
				jstl-include-options='{"test": "test"}' jstl-include-mode="prepend">
				<div>prepend</div>
			</div>
			<div jstl-include="jstl-template.html"
				jstl-include-options='{"test": "test"}' jstl-include-mode="replace">
				<div>replace</div>
			</div>
			<div jstl-include="${jstlTemplate}"
				jstl-include-options='{"test": "test"}' jstl-include-mode="append">
				<div>Parameterisierter Include</div>
			</div>
			<div jstl-include="#" jstl-include-options='{"url": jstlTemplate}'
				jstl-include-mode="append">
				<div>Parameterisierter Include mit den Options</div>
			</div>
		</div-->
		<div>
			data tests
			<div jstl-data='{"data": "direct Data"}'>${data}</div>
			<div jstl-data='dataFunction()'>${functionResult}</div>
			<div jstl-data="jstl-remote.data.json" jstl-data-mode="remote"
				jstl-data-options='{"test": "test"}'>${remoteData}</div>
			<div jstl-data="jstl-remote.data.json" jstl-data-mode="remote"
				jstl-data-var="remoteData">${remoteData.remoteData} with new
				Varname</div>
		</div>

		<div>
			Choose test
			<div jstl-choose="">
				<div jstl-when="false">when 1</div>
				<div jstl-when='false'>when 2</div>
				<div jstl-otherwise="">otherwise</div>
			</div>
		</div>
		<div>
			foreach test 0
			<div jstl-data='{"pageNumbers":[1,2,3,4,5], "test":5}'
				jstl-foreach="${pageNumbers}" jstl-foreach-var="pageNumber">
				<span jstl-if="${pageNumber == test}">${pageNumber}</span> <span
					jstl-if="${pageNumber != test}">${pageNumber}</span> <br />
			</div>
		</div>

		<div>
			foreach test 1
			<div jstl-data='{"data": "direct Data"}' jstl-foreach="${list}"
				jstl-foreach-var="listItem" jstl-foreach-status="listStatus">
				<span>${listStatus.index} </span> <span>id: ${listItem.id}</span> <span>name:
					${listItem.name}</span> <span>name: ${jstlTemplate}</span> <br />
			</div>
		</div>
		<div>
			foreach on remote data
			<div jstl-data="jstl-remote.data.json" jstl-data-mode="remote"
				jstl-data-var="newData" jstl-foreach="${newData.list}"
				jstl-foreach-var="listItem" jstl-foreach-status="listStatus">
				<span>${listStatus.index} </span> <span>id: ${listItem.id}</span> <span>name:
					${listItem.name}</span> <span>name: ${jstlTemplate}</span> <br />
			</div>
		</div>
		<div>
			foreach on remote data with start index and break condition
			<div jstl-data="jstl-remote.data.json" jstl-data-mode="remote"
				jstl-foreach="${list}" jstl-foreach-var="listItem"
				jstl-foreach-status="listStatus" jstl-foreach-start-index="2"
				jstl-foreach-break-condition="${listStatus.index == 5}">
				<span>${listStatus.index} </span> <span>id: ${listItem.id}</span> <span>name:
					${listItem.name}</span> <span>name: ${jstlTemplate}</span> <br />
			</div>
		</div>
		<div>
			foreach test 2
			<div jstl-foreach="${jstlList}">
				<div jstl-if="${itemVar.show}">
					<span>${statusVar.index} </span> <span>id: ${itemVar.id}</span> <span>name:
						${itemVar.name}</span> <span>name: ${jstlTemplate}</span>
				</div>
			</div>
		</div>

		<div>
			foreach on data context / it's like run over all properties of an
			Object
			<div jstl-data='jstl-remote.data.array.json' jstl-data-mode="remote"
				jstl-foreach="" jstl-foreach-var="listItem"
				jstl-foreach-status="listStatus">
				<div jstl-if="${listItem.id != 1}">
					<span>${listStatus.index} </span> <span>id: ${listItem.id}</span> <span>name:
						${listItem.name}</span> <span>name: ${jstlTemplate}</span>
				</div>
			</div>
		</div>

		<div class="jstl-text-content-type">
			<ul	jstl-data="${contextExtention}">
				<li>
					<h4>inculde as html and child processing</h4>
					<div jstl-text-content-type="html">${text}</div>
				</li>
				<li>
					<h4>inculde as html and no child processing</h4>
					<div jstl-text-content-type="html"
						jstl-ignore-childs="">${text}</div>
				</li>
				<li>
					<h4>normal inculde as plain text</h4>
					<div>${text}</div>
				</li>
			</ul>
		</div>
	</div>

	<div id="log">
		<div>Logs</div>
	</div>

	<script type="text/javascript">
		/*<!--*/

        function load(aElement) {
	        //$(aElement).hide();
	        //alert("load");
        };
        
        function success(aElement) {
	        //alert("success");
	        //$(aElement).show();
        };
        
        function toArray(value) {
	        return value;
        };
        
        function testFunction() {
	        return "result from a Function!";
        };
        
        function dataFunction() {
	        return {
		        "functionResult" : "result from a Function!"
	        };
        };
        
        var data = {	        		
    	        "contextExtention":{"text":"<b>insert</b>text as <i>html</i><p>$\{subtext\}</p>", "subtext":"and with child processing"},
    	        test : "text",
    	        "boolean" : false,
    	        "jstlTemplate" : "jstl-template.html",
    	        "jstlList" : []
    	        };
        
        $(document).ready(function() {
	      
	        
	        for (var i = 0; i < 10; i++) {
		        data.jstlList.push({
		        "id" : i,
		        "name" : "item " + i,
		        "show" : (i % 4 != 0)
		        });
	        }
	        $("#test").on("jstl-on-load", function(event) {
		        window.jstlStartTime = new Date();
	        });
	        
	        $("#test").on("jstl-on-ready", function(event) {
	        	window.jstlEndTime = new Date();
	        	$("body").append(window.jstlEndTime.getTime() - window.jstlStartTime.getTime() + "ms");
	        });
	        
	        $("#test").on(de.titus.jstl.Constants.EVENTS.onLoad, function(event) {
		        //console.log("load event");
		        //console.log(event);
		        //event.stopPropagation();
	        });
	        
	        $("#test").jstl({data:data});
	        
        });
        /*-->*/
	</script>

</body>
</html>
