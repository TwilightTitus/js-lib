/*
 * The MIT License (MIT)
 * 
 * Copyright (c) 2015 Frank Sch√ºler
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */


var de=de||{};de.titus=de.titus||{};de.titus.core=de.titus.core||{Version:"1.10.0"};if(de.titus.core.Namespace==undefined){de.titus.core.Namespace={};de.titus.core.Namespace.create=function(e,a){var d=e.split(".");var c=window||global;for(var b=0;b<d.length;b++){if(c[d[b]]==undefined){c[d[b]]={};}c=c[d[b]];}a();};}de.titus.core.Namespace.create("de.titus.core.SpecialFunctions",function(){var a=de.titus.core.SpecialFunctions={DEVMODE:location.search?(/.*devmode=true.*/ig).test(location.search):false,STATEMENTS:{},doEval:function(h,g,b){if(b){a.doEvalWithContext(h,(g||{}),undefined,b);}else{if(typeof h!=="string"){return h;}var d=h.trim();if(d===""){return undefined;}try{var c=new Function("aContext","with(this){return "+h+";}");return c.call(g);}catch(f){if(a.DEVMODE){console.log("----------------------\n","doEval()\n",'statement: "',h,'"\n','context: "',g,'"\n','callback: "',b,'"\n',"error: ",f,"\n","----------------------");}throw f;}}},doEvalWithContext:function(g,f,h,c){if(typeof c==="function"){window.setTimeout(function(){var e=a.doEvalWithContext(g,f,h,undefined);
c(e,f);},1);}else{try{var b=a.doEval(g,f);if(typeof b==="undefined"){return h;}return b;}catch(d){return h;}}}};});(function(a){de.titus.core.Namespace.create("de.titus.core.jquery.Components",function(){var b=de.titus.core.jquery.Components={};b.asComponent=function(d,c){a.fn[b.__buildFunctionName(d)]=function(e){return b.__createInstance(this,d,c,e);};};b.__buildFunctionName=function(c){return c.replace(/\./g,"_");};b.__createInstance=function(g,h,d,f){if(g.length==0){return;}else{if(g.length>1){var c=[];g.each(function(){c.push(b.__createInstance(a(this),h,d,f));});return c;}else{var e=g.data(h);if(!e){e=new d(g,f);g.data(h,e);}return e;}}};});})($);(function(a){a.fn.tagName=a.fn.tagName||function(){if(this.length==undefined||this.length==0){return undefined;}else{if(this.length>1){return this.each(function(){return a(this).tagName();});}else{var b=this.prop("tagName");if(b!=undefined&&b!=""){return b.toLowerCase();}return undefined;}}};})(jQuery);(function(a){if(a.fn.Selector==undefined){a.fn.Selector=function(){var b=[];
this.each(function(){var e=a(this);if(e[0].id!=undefined&&e[0].id!=""){b.push("#"+e[0].id);}else{var h;while(e.length){var g=e.get(0),d=g.localName;if(!d){break;}d=d.toLowerCase();var f=e.parent();var k=f.children(d);if(k.length>1){allSiblings=f.children();var c=allSiblings.index(g)+1;if(c>0){d+=":nth-child("+c+")";}}h=d+(h?" > "+h:"");e=f;}b.push(h);}});return b.join(",");};}})($);(function(){de.titus.core.Namespace.create("de.titus.core.ArrayUtils",function(){var a=de.titus.core.ArrayUtils={};});})($);(function(){de.titus.core.Namespace.create("de.titus.core.PagingUtils",function(){var a=de.titus.core.PagingUtils={pagerData:function(d,f,c){var e=Math.round(f/2);var b={firstPage:1,startPage:1,endPage:c,lastPage:f,current:d,pageCount:f};if(c>f){b.endPage=f;}else{if(d+e>f){b.endPage=f;b.startPage=(end-c)+1;}else{if(d-e>1){b.endPage=(d+e);b.startPage=(end-c)+1;}}}b.count=b.endPage-b.startPage;return b;},pageArray:function(c,b,d){return d.slice((c-1)*b,b);}};});})($);de.titus.core.Namespace.create("de.titus.core.regex.Matcher",function(){var a=de.titus.core.regex.Matcher=function(b,c){this.internalRegex=b;
this.processingText=c;this.currentMatch=undefined;};a.prototype.isMatching=function(){return this.internalRegex.test(this.processingText);};a.prototype.next=function(){this.currentMatch=this.internalRegex.exec(this.processingText);if(this.currentMatch!=undefined){this.processingText=this.processingText.replace(this.currentMatch[0],"");return true;}return false;};a.prototype.getMatch=function(){if(this.currentMatch!=undefined){return this.currentMatch[0];}return undefined;};a.prototype.getGroup=function(b){if(this.currentMatch!=undefined){return this.currentMatch[b];}return undefined;};a.prototype.replaceAll=function(c,b){if(this.currentMatch!=undefined){return b.replace(this.currentMatch[0],c);}return b;};});de.titus.core.Namespace.create("de.titus.core.regex.Regex",function(){var a=de.titus.core.regex.Regex=function(b,c){this.internalRegex=new RegExp(b,c);};a.prototype.parse=function(b){return new de.titus.core.regex.Matcher(this.internalRegex,b);};});de.titus.core.Namespace.create("de.titus.core.ExpressionResolver",function(){var a=de.titus.core.ExpressionResolver=function(b){this.regex=new de.titus.core.regex.Regex(b||de.titus.core.ExpressionResolver.TEXT_EXPRESSION_REGEX);
};a.TEXT_EXPRESSION_REGEX="\\$\\{([^\\$\\{\\}]*)\\}";a.prototype.resolveText=function(d,f,c){var h=d;var e=this.regex.parse(h);while(e.next()){var g=e.getMatch();var b=this.internalResolveExpression(e.getGroup(1),f,c);if(b!=undefined){h=e.replaceAll(b,h);}}return h;};a.prototype.resolveExpression=function(c,e,b){var d=this.regex.parse(c);if(d.next()){return this.internalResolveExpression(d.getGroup(1),e,b);}return this.internalResolveExpression(c,e,b);};a.prototype.internalResolveExpression=function(c,f,b){try{return de.titus.core.SpecialFunctions.doEvalWithContext(c,f,b);}catch(d){return b;}};de.titus.core.ExpressionResolver.DEFAULT=new de.titus.core.ExpressionResolver();});(function(a){de.titus.core.Namespace.create("de.titus.core.URL",function(){var b=de.titus.core.URL=function(l,f,d,n,c,g){var o=l;var h=f;var e=d;var p=n;var m=c;var k=g;this.getMarker=function(){return k;};this.setMarker=function(q){k=q;};this.getProtocol=function(){if(o==undefined){o="http";}return o;};this.setProtocol=function(q){protokoll=q;
};this.getDomain=function(){return h;};this.setDomain=function(q){h=q;};this.getPath=function(){return p;};this.setPath=function(q){p=q;};this.getPort=function(){if(e==undefined){e=80;}return e;};this.setPort=function(q){e=q;};this.getParameters=function(){return m;};this.setParameters=function(q){m=q;};};b.prototype.getParameter=function(c){var d=this.getParameters()[c];if(d==undefined){return undefined;}if(d.length>1){return d;}else{return d[0];}};b.prototype.getParameters=function(c){return this.getParameters()[c];};b.prototype.addParameter=function(e,d,c){if(this.getParameters()[e]==undefined){this.getParameters()[e]=[];}if(!c&&d==undefined){this.getParameters()[e]=undefined;}else{if(!c&&d!=undefined&&d.length!=undefined){this.getParameters()[e]=d;}else{if(c&&d!=undefined&&d.length!=undefined){a.merge(this.getParameters()[e],d);}else{if(!c&&d!=undefined){this.getParameters()[e]=[d];}else{if(c&&d!=undefined){this.getParameters()[e].push(d);}}}}}};b.prototype.getQueryString=function(){if(this.getParameters()!=undefined){var g=this.getParameters();
var c="?";var f=true;for(var d in g){if(!f){c=c+"&";}else{f=false;}var e=g[d];if(e.length==undefined){c=c+encodeURIComponent(d)+"="+encodeURIComponent(e);}else{for(j=0;j<e.length;j++){if(j>0){c=c+"&";}c=c+encodeURIComponent(d)+"="+encodeURIComponent(e[j]);}}}return c;}else{return"";}};b.prototype.getMarkerString=function(){if(this.getMarker()!=undefined){return"#"+this.getMarker();}return"";};b.prototype.asString=function(){var c=this.getProtocol()+"://"+this.getDomain()+":"+this.getPort();if(this.getPath()!=undefined){c=c+this.getPath();}c=c+this.getQueryString()+this.getMarkerString();return c;};b.prototype.toString=function(){return this.asString();};de.titus.core.URL.fromString=function(e){var f=e;var q="http";var r;var d=80;var s="/";var g="";var o;var c=-1;var n={};var m=new RegExp("\\?([^#]*)");var k=m.exec(f);if(k!=undefined){o=k[1];}var m=new RegExp("#([^\\?#]*)");var k=m.exec(f);if(k!=undefined){g=decodeURIComponent(k[1]);}c=f.indexOf("://");if(c>0){q=f.substr(0,c);f=f.substr(c+3);
}var m=new RegExp("([^/:\\?#]*)");var k=m.exec(f);if(k!=undefined){r=k[1];}var m=new RegExp(":([^\\/\\?#]*)");var k=m.exec(f);if(k!=undefined){d=k[1];}else{if(q.toLowerCase()=="https"){d=443;}else{if(q.toLowerCase()=="ftp"){d=21;}else{if(q.toLowerCase()=="ftps"){d=21;}}}}var m=new RegExp("(/[^\\?#]*)");var k=m.exec(f);if(k!=undefined){s=k[1];}var m=new RegExp("([^&\\?#=]*)=([^&\\?#=]*)");if(o!=undefined&&""!=o){var h=o.split("&");for(i=0;i<h.length;i++){var k=m.exec(h[i]);var l=decodeURIComponent(k[1]);var p=decodeURIComponent(k[2]);n[l]?n[l].push(p):n[l]=[p];}}return new de.titus.core.URL(q,r,d,s,n,g);};de.titus.core.URL.getCurrentUrl=function(){if(de.titus.core.URL.STATIC__CURRENTURL==undefined){de.titus.core.URL.STATIC__CURRENTURL=de.titus.core.URL.fromString(location.href);}return de.titus.core.URL.STATIC__CURRENTURL;};});})($);(function(a){de.titus.core.Namespace.create("de.titus.core.Page",function(){var b=de.titus.core.Page=function(){this.baseTagValue=undefined;this.hasBaseTag=false;
var c=a("base");if(c!=undefined){this.baseTagValue=c.attr("href");this.hasBaseTag=true;}this.files={};this.data={};};b.CSSTEMPLATE='<link rel="stylesheet" type="text/css"/>';b.JSTEMPLATE='<script type="text/javascript"><\/script>';b.prototype.addJsFile=function(d,c,e){if(a.isArray(d)){return this.addJsFiles(d,c,e);}if(this.files[d]==undefined){this.files[d]=true;var f=a(de.titus.core.Page.JSTEMPLATE).clone();f.attr("src",d);a("head").append(f);if(c!=undefined){c();}}else{if(e&&c!=undefined){c();}}};b.prototype.addJsFiles=function(f,d,g){if(a.isArray(f)){var e=f.shift();if(f.length!=0){var c=this;this.addJsFile(e,function(){c.addJsFiles(f,d,g);},true);}else{this.addJsFile(e,d,g);}}else{this.addJsFile(f,d,g);}};b.prototype.addCssFile=function(d){if(a.isArray(d)){this.addCssFiles(d);return;}if(this.files[d]==undefined){this.files[d]=true;var c=a(de.titus.core.Page.CSSTEMPLATE).clone();c.attr("href",d);a("head").append(c);}};b.prototype.addCssFiles=function(c){if(a.isArray(c)){for(i=0;i<c.length;
i++){this.addCssFile(c[i]);}}};b.prototype.getUrl=function(){return de.titus.core.URL.getCurrentUrl();};b.prototype.buildUrl=function(d){var c=this.detectBrowser();if(c.ie&&c.ie<11){var e=d.toLowerCase().trim();if(this.hasBaseTag&&!e.indexOf("http:")==0&&!e.indexOf("https:")==0&&!e.indexOf("ftp:")==0&&!e.indexOf("ftps:")==0&&!e.indexOf("mailto:")==0&&!e.indexOf("notes:")==0&&!e.indexOf("/")==0){return this.baseTagValue+d;}}return d;};b.prototype.detectBrowser=function(){if(b.BROWSER){return b.BROWSER;}b.BROWSER={};if(document.documentMode){b.BROWSER.ie=document.documentMode;}else{b.BROWSER.other=true;}return b.BROWSER;};b.prototype.setData=function(d,c){this.data[d]=c;};b.prototype.getData=function(c){return this.data[c];};de.titus.core.Page.getInstance=function(){if(de.titus.core.Page.INSTANCE==undefined){de.titus.core.Page.INSTANCE=new de.titus.core.Page();}return de.titus.core.Page.INSTANCE;};if(a.fn.de_titus_core_Page==undefined){a.fn.de_titus_core_Page=de.titus.core.Page.getInstance;
}});})($);de.titus.core.Namespace.create("de.titus.core.UUID",function(){de.titus.core.UUID=function(a){var b=a||"-";var c="xxxxxxxx"+b+"xxxx"+b+"4xxx"+b+"yxxx"+b+"xxxxxxxxxxxx";return c.replace(/[xy]/g,function(f){var e=Math.random()*16|0;var d=f=="x"?e:(e&3|8);return d.toString(16);});};});(function(a){de.titus.core.Namespace.create("de.titus.core.StringUtils",function(){var b=a.fn.de_titus_core_StringUtils=de.titus.core.StringUtils={};b.DEFAULTS={};b.DEFAULTS.formatToHtml={"tabsize":4,"tabchar":"&nbsp;","newlineTag":"<br/>"};b.DEFAULTS.trimTextLength={"postfix":"..."};b.trimTextLength=function(g,d,e){if(g==undefined||typeof g!=="string"||g==""){return g;}var f=a.extend({},e,b.DEFAULTS.trimTextLength);if(g.length>d){var c=d-f.postfix.length;if((g.length-c)>0){return g.substring(0,c)+f.postfix;}}return g;};b.formatToHtml=function(g,d){if(g==undefined||typeof g!=="string"||g==""){return g;}var f=a.extend({},d,b.DEFAULTS.formatToHtml);var h=g.replace(new RegExp("\n\r","g"),"\n");var h=g.replace(new RegExp("\r","g"),"\n");
var c=h.split("\n");var h="";for(var e=0;e<c.length;e++){if(e!=0){h=h+f.newlineTag;}h=h+b.preventTabs(c[e],f.tabsize,f.tabchar);}return h;};b.getTabStopMap=function(e,d){var f=[];for(var c=0;c<=e;c++){if(c==0){f[0]="";}else{f[c]=f[c-1]+d;}}return f;};b.preventTabs=function(l,f,c){var d=b.getTabStopMap(f,c);var g=f;var m="";var k=l.split("\t");for(var e=0;e<k.length;e++){if(k[e].length!=0&&e!=0){var n=m.length;var h=n%g;m=m+d[f-h]+k[e];}else{if(k[e].length==0&&e!=0){m=m+d[f];}else{m=m+k[e];}}}return m;};b.format=function(d,c){var e=arguments;return d.replace(b.format.VARREGEX,function(h){var f=parseInt(h.substring(1,h.length-1))+1;var g;if(f>0&&f<e.length){g=e[f];if(typeof g!=="string"){g=JSON.stringify(g);}}else{if(f===-1){g="{";}else{if(f===-2){g="}";}else{g="";}}}return g;});};b.format.VARREGEX=new RegExp("{-?[0-9]+}","g");});})($);(function(a){de.titus.core.Namespace.create("de.titus.core.EventBind",function(){var b=de.titus.core.EventBind=function(d,e){var c={preventDefault:(typeof d.attr("event-prevent-default")!=="undefined"),stopPropagation:(typeof d.attr("event-stop-propagation")!=="undefined")};
c.eventType=d.attr("event-type");if(typeof c.eventType==="undefined"){d.data(de.titus.core.EventBind.STATE.FINISHED,de.titus.core.EventBind.FINISHEDSTATE.FAIL);}else{c.action=d.attr("event-action");c.delegation=d.attr("event-delegation");if(typeof(c.action||c.delegation)==="undefined"){d.data(de.titus.core.EventBind.STATE.FINISHED,de.titus.core.EventBind.FINISHEDSTATE.FAIL);return;}c.eventData=d.attr("event-data");if(typeof c.eventData!=="undefined"&&c.eventData.length>0){c.eventData=de.titus.core.EventBind.EXPRESSIONRESOLVER.resolveExpression(eventData,e,{});}else{if(typeof e!=="undefined"){c.eventData=a().extend({},e);}}if(typeof c.eventData!=="undefined"){d.on(c.eventType,null,c.eventData,de.titus.core.EventBind.$$__execute__$$);}else{d.on(c.eventType,de.titus.core.EventBind.$$__execute__$$);}d.data(de.titus.core.EventBind.STATE.FINISHED,de.titus.core.EventBind.FINISHEDSTATE.READY);return c;}};b.EXPRESSIONRESOLVER=new de.titus.core.ExpressionResolver();b.STATE={FINISHED:"$$EventBind.FINISHED$$"};
b.FINISHEDSTATE={FAIL:"fail",READY:"ready"};b.$$__execute__$$=function(c){var e=a(this);var g=e.data("de.titus.core.EventBind");if(g.preventDefault){c.preventDefault();}if(g.stopPropagation){c.stopPropagation();}if(typeof g.action!=="undefined"){var f=g.action;f=b.EXPRESSIONRESOLVER.resolveExpression(g.action,c.data,undefined);if(typeof f==="function"){var d=Array.from(arguments);if(d!=undefined&&d.length>=1&&c.data!=undefined){d.splice(1,0,c.data);}f.apply(f,d);}}if(typeof g.delegation!=="undefined"){e.trigger(g.delegation,typeof g.eventData!=="undefined"?[g.eventData]:undefined);}return !c.isDefaultPrevented();};de.titus.core.jquery.Components.asComponent("de.titus.core.EventBind",de.titus.core.EventBind);a(document).ready(function(){var e=a("[event-autorun]");if(typeof e!=="undefined"&&e.length>0){e.de_titus_core_EventBind();e.find("[event-type]").de_titus_core_EventBind();var c=new MutationObserver(function(f){f.forEach(function(g){g.addedNodes.forEach(function(h){if(h.nodetype!=Node.TEXT_NODE){a(h).de_titus_core_EventBind();
a(h).find("[event-type]").de_titus_core_EventBind();}});});});var d={attributes:true,childList:true,subtree:true,characterData:false};c.observe(document.querySelector("[event-autorun]"),d);}});});})($,document);(function(a){de.titus.core.Namespace.create("de.titus.core.Converter",function(){de.titus.core.Converter.xmlToJson=function(c){var g={};if(c.nodeType==1||c.nodeType==9){if(c.attributes!=undefined&&c.attributes.length>0){var f={};for(var e=0;e<c.attributes.length;e++){var b=c.attributes.item(e);f[b.nodeName]=b.nodeValue;}g["@attributes"]=f;}}else{if(c.nodeType==3||c.nodeType==4){return c.textContent.trim();}}if(c.hasChildNodes()){var l=undefined;var k=false;for(var h=0;h<c.childNodes.length;h++){var n=c.childNodes.item(h);if(n.nodeType==1){k=true;var m=n.nodeName;if(typeof(g[m])=="undefined"){g[m]=de.titus.core.Converter.xmlToJson(n);}else{if(typeof(g[m].push)=="undefined"){var d=g[m];g[m]=[];g[m].push(d);}g[m].push(de.titus.core.Converter.xmlToJson(n));}}else{if(n.nodeType==3||n.nodeType==4){if(n.textContent!=""){l=(l?l+n.textContent:n.textContent);
}}}}if(l){if(g["@attributes"]==undefined&&!k){g=l.trim();}else{g.text=l.trim();}}}return g;};});})($);(function(b,a){de.titus.core.Namespace.create("de.titus.core.ScreenObserver",function(){var c=de.titus.core.ScreenObserver={__timeoutId:undefined,__handler:{},addHandler:function(d){if(typeof d.condition!=="undefined"&&d.condition.length!=0){d.id=de.titus.core.UUID("-");c.__handler[d.id]=d;c.__callHandler(d,c.__screenData());return d;}},__screenData:function(){return{width:window.innerWidth,height:window.innerHeight,pixelRatio:window.devicePixelRatio,landscape:(window.innerHeight<=window.innerWidth),portrait:(window.innerHeight>window.innerWidth)};},__resizing:function(){c.__timeoutId=undefined;var d=c.__screenData();Object.getOwnPropertyNames(c.__handler).forEach(function(e){c.__callHandler(c.__handler[e],d);});},__callHandler:function(e,d){setTimeout((function(k,h,g){var f=g.resolveExpression(k.condition,h,false);if(typeof f!=="boolean"){return c.__handler[k.id]==undefined;}if(f){k.active=true;
k.activate.call(h);if(typeof k.deactivate!=="function"){c.__handler[k.id]==undefined;}}else{if(k.active&&typeof k.deactivate==="function"){k.deactivate.call(h);k.active=false;}}}).bind(null,e,d,a),66);},__handleResize:function(){if(c.__timeoutId){clearTimeout(c.__timeoutId);}c.__timeoutId=setTimeout(c.__resizing,250);}};window.addEventListener("resize",c.__handleResize,false);b(document).ready(c.__resizing);});})($,de.titus.core.ExpressionResolver.DEFAULT);
de.titus.core.Namespace.create("de.titus.logging.Version",function(){de.titus.logging.Version="2.1.0";});de.titus.core.Namespace.create("de.titus.logging.LogLevel",function(){var LogLevel=de.titus.logging.LogLevel=function(aOrder,aTitle){this.order=aOrder;this.title=aTitle;};LogLevel.prototype.isIncluded=function(aLogLevel){return this.order>=aLogLevel.order;};LogLevel.getLogLevel=function(aLogLevelName){if(aLogLevelName==undefined){return de.titus.logging.LogLevel.NOLOG;}var levelName=aLogLevelName.toUpperCase();return de.titus.logging.LogLevel[levelName];};LogLevel.NOLOG=new LogLevel(0,"NOLOG");LogLevel.ERROR=new LogLevel(1,"ERROR");LogLevel.WARN=new LogLevel(2,"WARN");LogLevel.INFO=new LogLevel(3,"INFO");LogLevel.DEBUG=new LogLevel(4,"DEBUG");LogLevel.TRACE=new LogLevel(5,"TRACE");});de.titus.core.Namespace.create("de.titus.logging.LogAppender",function(){var LogAppender=de.titus.logging.LogAppender=function(){};LogAppender.prototype.formatedDateString=function(aDate){if(aDate==undefined){return"";
}var dateString="";dateString+=aDate.getFullYear()+".";if(aDate.getMonth()<10){dateString+="0"+aDate.getMonth();}else{dateString+=aDate.getMonth();}dateString+=".";if(aDate.getDate()<10){dateString+="0"+aDate.getDate();}else{dateString+=aDate.getDate();}dateString+=" ";if(aDate.getHours()<10){dateString+="0"+aDate.getHours();}else{dateString+=aDate.getHours();}dateString+=":";if(aDate.getMinutes()<10){dateString+="0"+aDate.getMinutes();}else{dateString+=aDate.getMinutes();}dateString+=":";if(aDate.getSeconds()<10){dateString+="0"+aDate.getSeconds();}else{dateString+=aDate.getSeconds();}dateString+=":";if(aDate.getMilliseconds()<10){dateString+="00"+aDate.getMilliseconds();}if(aDate.getMilliseconds()<100){dateString+="0"+aDate.getMilliseconds();}else{dateString+=aDate.getMilliseconds();}return dateString;};LogAppender.prototype.logMessage=function(aMessage,anException,aLoggerName,aDate,aLogLevel){};});de.titus.core.Namespace.create("de.titus.logging.Logger",function(){var Logger=de.titus.logging.Logger=function(aName,aLogLevel,aLogAppenders){this.name=aName;
this.logLevel=aLogLevel;this.logAppenders=aLogAppenders;};Logger.prototype.isErrorEnabled=function(){return this.logLevel.isIncluded(de.titus.logging.LogLevel.ERROR);};Logger.prototype.isWarnEnabled=function(){return this.logLevel.isIncluded(de.titus.logging.LogLevel.WARN);};Logger.prototype.isInfoEnabled=function(){return this.logLevel.isIncluded(de.titus.logging.LogLevel.INFO);};Logger.prototype.isDebugEnabled=function(){return this.logLevel.isIncluded(de.titus.logging.LogLevel.DEBUG);};Logger.prototype.isTraceEnabled=function(){return this.logLevel.isIncluded(de.titus.logging.LogLevel.TRACE);};Logger.prototype.logError=function(aMessage,aException){if(this.isErrorEnabled()){this.log(aMessage,aException,de.titus.logging.LogLevel.ERROR);}};Logger.prototype.logWarn=function(aMessage,aException){if(this.isWarnEnabled()){this.log(aMessage,aException,de.titus.logging.LogLevel.WARN);}};Logger.prototype.logInfo=function(aMessage,aException){if(this.isInfoEnabled()){this.log(aMessage,aException,de.titus.logging.LogLevel.INFO);
}};Logger.prototype.logDebug=function(aMessage,aException){if(this.isDebugEnabled()){this.log(aMessage,aException,de.titus.logging.LogLevel.DEBUG);}};Logger.prototype.logTrace=function(aMessage,aException){if(this.isTraceEnabled()){this.log(aMessage,aException,de.titus.logging.LogLevel.TRACE);}};Logger.prototype.log=function(aMessage,anException,aLogLevel){if(this.logAppenders==undefined){return;}if(this.logAppenders.length>0){for(var i=0;i<this.logAppenders.length;i++){this.logAppenders[i].logMessage(aMessage,anException,this.name,new Date(),aLogLevel);}}};});de.titus.core.Namespace.create("de.titus.logging.LoggerRegistry",function(){var LoggerRegistry=de.titus.logging.LoggerRegistry=function(){this.loggers={};};LoggerRegistry.prototype.addLogger=function(aLogger){if(aLogger==undefined){return;}if(this.loggers[aLogger.name]==undefined){this.loggers[aLogger.name]=aLogger;}};LoggerRegistry.prototype.getLogger=function(aLoggerName){if(aLoggerName==undefined){return;}return this.loggers[aLoggerName];
};LoggerRegistry.getInstance=function(){if(LoggerRegistry.INSTANCE==undefined){LoggerRegistry.INSTANCE=new LoggerRegistry();}return LoggerRegistry.INSTANCE;};});de.titus.core.Namespace.create("de.titus.logging.LoggerFactory",function(){var LoggerFactory=de.titus.logging.LoggerFactory=function(){this.configs=undefined;this.appenders={};this.loadLazyCounter=0;};LoggerFactory.prototype.newLogger=function(aLoggerName){var logger=de.titus.logging.LoggerRegistry.getInstance().getLogger(aLoggerName);if(logger==undefined){var config=this.findConfig(aLoggerName);var logLevel=de.titus.logging.LogLevel.getLogLevel(config.logLevel);var appenders=this.getAppenders(config.appenders);logger=new de.titus.logging.Logger(aLoggerName,logLevel,appenders);de.titus.logging.LoggerRegistry.getInstance().addLogger(logger);}return logger;};LoggerFactory.prototype.getConfig=function(){if(this.configs==undefined){this.updateConfigs();}return this.configs;};LoggerFactory.prototype.setConfig=function(aConfig){if(aConfig!=undefined){this.configs=aConfig;
this.updateLogger();}};LoggerFactory.prototype.updateConfigs=function(aConfig){if(this.configs==undefined){this.configs={};}var configElement=$("[logging-properties]").first();if(configElement!=undefined&&(configElement.length==undefined||configElement.length==1)){var propertyString=configElement.attr("logging-properties");var properties=de.titus.core.SpecialFunctions.doEval(propertyString,{});this.loadConfig(properties);}else{de.titus.logging.LoggerFactory.getInstance().doLoadLazy();}};LoggerFactory.prototype.doLoadLazy=function(){if(this.loadLazyCounter>10){return;}this.loadLazyCounter++;window.setTimeout(function(){de.titus.logging.LoggerFactory.getInstance().loadConfig();},1);};LoggerFactory.prototype.loadConfig=function(aConfig){if(aConfig==undefined){this.updateConfigs();}else{if(aConfig.remote){this.loadConfigRemote(aConfig.remote);}else{if(aConfig.data){this.setConfig(aConfig.data.configs);}}}};LoggerFactory.prototype.loadConfigRemote=function(aRemoteData){var this_=this;var ajaxSettings={"async":false,"cache":false,"dataType":"json"};
ajaxSettings=$.extend(ajaxSettings,aRemoteData);ajaxSettings.success=function(data){this_.setConfig(data.configs);};ajaxSettings.error=function(error){console.log(error);};$.ajax(ajaxSettings);};LoggerFactory.prototype.updateLogger=function(){var loggers=de.titus.logging.LoggerRegistry.getInstance().loggers;for(var loggerName in loggers){var logger=loggers[loggerName];var config=this.findConfig(loggerName);var logLevel=de.titus.logging.LogLevel.getLogLevel(config.logLevel);var appenders=this.getAppenders(config.appenders);logger.logLevel=logLevel;logger.logAppenders=appenders;}};LoggerFactory.prototype.findConfig=function(aLoggerName){var defaultConfig={"filter":"","logLevel":"NOLOG","appenders":[]};var actualConfig=undefined;var configs=this.getConfig();for(var i=0;i<configs.length;i++){var config=configs[i];if(this.isConfigActiv(aLoggerName,config,actualConfig)){actualConfig=config;}else{if(config.filter==undefined||config.filter==""){defaultConfig=config;}}if(actualConfig!=undefined&&actualConfig.filter==aLoggerName){return actualConfig;
}}return actualConfig||defaultConfig;};LoggerFactory.prototype.isConfigActiv=function(aLoggerName,aConfig,anActualConfig){if(anActualConfig&&anActualConfig.filter.length>=aConfig.filter.filter){return false;}return aLoggerName.search(aConfig.filter)==0;};LoggerFactory.prototype.getAppenders=function(theAppenders){var result=new Array();for(var i=0;i<theAppenders.length;i++){var appenderString=theAppenders[i];var appender=this.appenders[appenderString];if(!appender){appender=de.titus.core.SpecialFunctions.doEval("new "+appenderString+"();");if(appender){this.appenders[appenderString]=appender;}}if(appender!=undefined){result.push(appender);}}return result;};LoggerFactory.getInstance=function(){if(LoggerFactory.INSTANCE==undefined){LoggerFactory.INSTANCE=new LoggerFactory();}return LoggerFactory.INSTANCE;};});de.titus.core.Namespace.create("de.titus.logging.ConsolenAppender",function(){var ConsolenAppender=de.titus.logging.ConsolenAppender=function(){};ConsolenAppender.prototype=new de.titus.logging.LogAppender();
ConsolenAppender.prototype.constructor=ConsolenAppender;ConsolenAppender.prototype.logMessage=function(aMessage,anException,aLoggerName,aDate,aLogLevel){if(de.titus.logging.LogLevel.NOLOG==aLogLevel){return;}var log=[];if(aDate){Array.prototype.push.apply(log,[this.formatedDateString(aDate)," "]);}Array.prototype.push.apply(log,["***",aLogLevel.title,"*** ",aLoggerName]);if(aMessage){log.push(" -> ");if(Array.isArray(aMessage)){Array.prototype.push.apply(log,aMessage);}else{log.push(aMessage);}}if(anException){Array.prototype.push.apply(log,[": ",anException]);}if(de.titus.logging.LogLevel.ERROR==aLogLevel){console.error==undefined?console.error.apply(console,log):console.log.apply(console,log);}else{if(de.titus.logging.LogLevel.WARN==aLogLevel){console.warn==undefined?console.warn.apply(console,log):console.log.apply(console,log);}else{if(de.titus.logging.LogLevel.INFO==aLogLevel){console.info==undefined?console.info.apply(console,log):console.log.apply(console,log);}else{if(de.titus.logging.LogLevel.DEBUG==aLogLevel){console.debug==undefined?console.debug.apply(console,log):console.log.apply(console,log);
}else{if(de.titus.logging.LogLevel.TRACE==aLogLevel){console.trace==undefined?console.trace.apply(console,log):console.log.apply(console,log);}}}}}};});(function($){de.titus.core.Namespace.create("de.titus.logging.HtmlAppender",function(){var HtmlAppender=de.titus.logging.HtmlAppender=function(){};HtmlAppender.CONTAINER_QUERY="#log";HtmlAppender.prototype=new de.titus.logging.LogAppender();HtmlAppender.prototype.constructor=HtmlAppender;HtmlAppender.prototype.logMessage=function(aMessage,anException,aLoggerName,aDate,aLogLevel){var container=$(de.titus.logging.HtmlAppender.CONTAINER_QUERY);if(container==undefined){return;}var log=$("<div />").addClass("log-entry "+aLogLevel.title);var logEntry="";if(aDate){logEntry+=logEntry=this.formatedDateString(aDate)+" ";}logEntry+="***"+aLogLevel.title+"*** "+aLoggerName+"";if(aMessage){logEntry+=" -> "+aMessage;}if(anException){logEntry+=": "+anException;}log.text(logEntry);container.append(log);};});})($);de.titus.core.Namespace.create("de.titus.logging.MemoryAppender",function(){window.MEMORY_APPENDER_LOG=new Array();
var MemoryAppender=de.titus.logging.MemoryAppender=function(){};MemoryAppender.prototype=new de.titus.logging.LogAppender();MemoryAppender.prototype.constructor=MemoryAppender;MemoryAppender.prototype.logMessage=function(aMessage,anException,aLoggerName,aDate,aLogLevel){var log={"date":aDate,"logLevel":aLogLevel,"loggerName":aLoggerName,"message":aMessage,"exception":anException};if(!window.MEMORY_APPENDER_LOG){window.MEMORY_APPENDER_LOG=[];}window.MEMORY_APPENDER_LOG.push(log);};});de.titus.core.Namespace.create("de.titus.logging.InteligentBrowserAppender",function(){var InteligentBrowserAppender=de.titus.logging.InteligentBrowserAppender=function(){this.appender=undefined;};InteligentBrowserAppender.prototype=new de.titus.logging.LogAppender();InteligentBrowserAppender.prototype.constructor=InteligentBrowserAppender;InteligentBrowserAppender.prototype.getAppender=function(){if(this.appender==undefined){var consoleAvalible=console&&console.log==="function";if(consoleAvalible){this.appender=new de.titus.logging.ConsolenAppender();
}else{if($(de.titus.logging.HtmlAppender.CONTAINER_QUERY)){this.appender=new de.titus.logging.HtmlAppender();}else{this.appender=new de.titus.logging.MemoryAppender();}}}return this.appender;};InteligentBrowserAppender.prototype.logMessage=function(aMessage,anException,aLoggerName,aDate,aLogLevel){this.getAppender().logMessage(aMessage,anException,aLoggerName,aDate,aLogLevel);};});
(function(a){de.titus.core.Namespace.create("de.titus.jstl",function(){de.titus.jstl.Version="4.0.0";});})($);de.titus.core.Namespace.create("de.titus.jstl.Constants",function(){de.titus.jstl.Constants={EVENTS:{onStart:"jstl-on-start",onLoad:"jstl-on-load",onSuccess:"jstl-on-success",onFail:"jstl-on-fail",onReady:"jstl-on-ready"},PHASE:{INIT:0,CONDITION:1,CONTEXT:2,MANIPULATION:3,CONTENT:4,CLEANING:5,CHILDREN:6,BINDING:7,FINISH:8}};});(function(b,a){de.titus.jstl.GlobalSettings=b.extend(true,{DEFAULT_TIMEOUT_VALUE:1,DEFAULT_INCLUDE_BASEPATH:""},a);})($,de.titus.jstl.GlobalSettings);de.titus.core.Namespace.create("de.titus.jstl.TaskRegistry",function(){var a={taskchain:undefined};a.append=function(g,c,b,e,f){if(!f&&!a.taskchain){a.taskchain=a.__buildEntry(g,c,b,e);}else{if(!f&&a.taskchain){a.append(g,c,b,e,a.taskchain);}else{if(f.phase<=c&&f.next&&f.next.phase<=c){a.append(g,c,b,e,f.next);}else{if(f.phase<=c&&f.next&&f.next.phase>c){var d=f.next;f.next=a.__buildEntry(g,c,b,e);f.next.next=d;}else{if(f.phase<=c&&!f.next){f.next=a.__buildEntry(g,c,b,e);}else{if(f.phase>c){var d=f;a.taskchain=a.__buildEntry(g,c,b,e);a.taskchain.next=f;}}}}}}};a.__buildEntry=function(e,c,b,d){return{name:e,phase:c,selector:b,task:d};};de.titus.jstl.TaskRegistry=a;});(function(b,a){de.titus.core.Namespace.create("de.titus.jstl.ExecuteChain",function(){let ExecuteChain=de.titus.jstl.ExecuteChain=function(e,d,c){this.count=d||0;this.taskChain=e;this.callback=c;};ExecuteChain.LOGGER=de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.ExecuteChain");ExecuteChain.prototype.finish=function(){if(ExecuteChain.LOGGER.isDebugEnabled()){ExecuteChain.LOGGER.logDebug("count: "+this.count);}this.count--;if(this.count==0){if(typeof this.callback==="function"){this.callback(this);}this.taskChain.nextTask();}};});})($,de.titus.jstl.GlobalSettings);(function(b,a){de.titus.core.Namespace.create("de.titus.jstl.TaskChain",function(){let TaskChain=function(g,f,e,d,c){this.element=g;this.context=f;this.processor=e;this.root=d;if(typeof c==="function"||Array.isArray(c)){this.callback=c;}this.__preventChilds=false;this.__taskchain=de.titus.jstl.TaskRegistry.taskchain;this.__currentTask=undefined;this.__buildContext();};TaskChain.LOGGER=de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.TaskChain");TaskChain.prototype.skipToPhase=function(c){if(TaskChain.LOGGER.isDebugEnabled()){TaskChain.LOGGER.logDebug("skipToPhase()");}while(this.__taskchain&&this.__taskchain.phase<c){this.__taskchain=this.__taskchain.next;}return this;};TaskChain.prototype.preventChilds=function(){if(TaskChain.LOGGER.isDebugEnabled()){TaskChain.LOGGER.logDebug(["preventChilds() ",this]);}this.__preventChilds=true;return this;};TaskChain.prototype.isPreventChilds=function(){return this.__preventChilds;};TaskChain.prototype.updateContext=function(d,c){if(TaskChain.LOGGER.isDebugEnabled()){TaskChain.LOGGER.logDebug("updateContext()");}if(c){this.context=b.extend(this.context,d);}else{this.context=d;}this.__buildContext();return this;};TaskChain.prototype.appendCallback=function(c){if(TaskChain.LOGGER.isDebugEnabled()){TaskChain.LOGGER.logDebug("appendCallback()");}if(typeof c!=="function"){return;}if(Array.isArray(this.callback)){this.callback.push(c);}else{if(this.callback){this.callback=[this.callback,c];}else{this.callback=c;}}return this;};TaskChain.prototype.nextTask=function(f,c){if(TaskChain.LOGGER.isDebugEnabled()){TaskChain.LOGGER.logDebug(['nextTask( "',f,'", "',c,'")']);}if(typeof f!=="undefined"){if(typeof f!=="object"){throw new Error();}else{this.updateContext(f,c);}}if(this.__taskchain){let name=this.__taskchain.name;let task=this.__taskchain.task;let phase=this.__taskchain.phase;let selector=this.__taskchain.selector;this.__currentTask=this.__taskchain;this.__taskchain=this.__taskchain.next;if(TaskChain.LOGGER.isDebugEnabled()){TaskChain.LOGGER.logDebug(['nextTask() -> next task: "',name,'", phase: "',phase,'", selector "',selector,'", element "',this.element,'" !']);}if(selector==undefined||this.element.is(selector)){try{task(this.element,this.context,this.processor,this);}catch(d){TaskChain.LOGGER.logError(d);}}else{if(TaskChain.LOGGER.isDebugEnabled()){TaskChain.LOGGER.logDebug(['nextTask() -> skip task: "',name,'", phase: "',phase,'", selector "',selector,'"!']);}this.nextTask();}}else{if(TaskChain.LOGGER.isDebugEnabled()){TaskChain.LOGGER.logDebug("nextTask() -> task chain is finished!");}this.finish();}return this;};TaskChain.prototype.__buildContext=function(){this.context["$element"]=this.element;this.context["__element__"]=this.element;this.context["$root"]=this.processor.element;this.context["__root__"]=this.processor.element;return this.context;};TaskChain.prototype.finish=function(c){if(TaskChain.LOGGER.isDebugEnabled()){TaskChain.LOGGER.logDebug("finish()");}if(c){if(typeof this.callback==="function"){this.callback(this.element,this.context,this.processor,this);}else{if(Array.isArray(this.callback)){for(let i=0;i<this.callback.length;i++){if(typeof this.callback[i]==="function"){this.callback[i](this.element,this.context,this.processor,this);}}}}this.element.trigger(de.titus.jstl.Constants.EVENTS.onSuccess,[this.context,this.processor]);}else{let self=this;setTimeout(function(){self.finish(true);},0);}return this;};de.titus.jstl.TaskChain=TaskChain;});})($,de.titus.jstl.GlobalSettings);(function(b,a){de.titus.core.Namespace.create("de.titus.jstl.functions.Children",function(){let Children=de.titus.jstl.functions.Children={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.Children"),TASK:function(f,e,d,c){if(Children.LOGGER.isDebugEnabled()){Children.LOGGER.logDebug("TASK");}if(!c.isPreventChilds()){let ignoreChilds=f.attr("jstl-ignore-childs");if(typeof ignoreChilds!=="undefined"){if(ignoreChilds.length>0){ignoreChilds=d.resolver.resolveExpression(ignoreChilds,e,true);}else{ignoreChilds=true;}if(ignoreChilds){return c.preventChilds().nextTask();}}let children=f.children();if(children.length==0){c.nextTask();}else{let child=b(children[0]);if(child&&child.length==1){d.compute(child,c.context,function(j,h,g){Children.ElementChain(children,1,c,j,h,g);});}}}else{c.nextTask();}},UpdateContext:function(c,d){c.updateContext(d.context,true);},ElementChain:function(c,d,e,h,g,f){e.updateContext(g,true);if(d<c.length){let next=b(c[d]);if(next&&next.length==1){f.compute(next,e.context,function(l,k,j){Children.ElementChain(c,d+1,e,l,k,j);});}}else{e.nextTask();}}};de.titus.jstl.TaskRegistry.append("children",de.titus.jstl.Constants.PHASE.CHILDREN,undefined,de.titus.jstl.functions.Children.TASK);});})($,de.titus.jstl.GlobalSettings);(function(b,a){de.titus.core.Namespace.create("de.titus.jstl.functions.If",function(){let If=de.titus.jstl.functions.If={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.If"),TASK:function(f,e,d,c){if(If.LOGGER.isDebugEnabled()){If.LOGGER.logDebug("TASK");}let expression=f.attr("jstl-if");if(typeof expression!=="undefined"){expression=d.resolver.resolveExpression(expression,e,false);if(typeof expression==="function"){expression=expression(f,e,d);}if(!(expression==true||expression=="true")){f.remove();c.preventChilds().finish();}else{c.nextTask();}}else{c.nextTask();}}};de.titus.jstl.TaskRegistry.append("if",de.titus.jstl.Constants.PHASE.CONDITION,"[jstl-if]",de.titus.jstl.functions.If.TASK);});})($,de.titus.jstl.GlobalSettings);(function(b,a){de.titus.core.Namespace.create("de.titus.jstl.functions.Preprocessor",function(){let Preprocessor=de.titus.jstl.functions.Preprocessor={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.Preprocessor"),STATICEVENTHANDLER:function(f,d,g,e){if(f&&f!=""){var c=e.resolver.resolveExpression(f,g);if(typeof c==="function"){c(g.$element,g,e);}}},TASK:function(f,e,d,c){if(Preprocessor.LOGGER.isDebugEnabled()){Preprocessor.LOGGER.logDebug("TASK");}if(f[0].nodeType!=1||f.tagName()=="br"){return c.preventChilds().finish();}if(!c.root){let ignore=f.attr("jstl-ignore");if(typeof ignore!=="undefined"){if(ignore.length>0){ignore=d.resolver.resolveExpression(ignore,e,false);}else{ignore=true;}if(ignore){return c.preventChilds().finish();}}let async=f.attr("jstl-async");if(typeof async!=="undefined"){if(async.length>0){async=d.resolver.resolveExpression(async,dataContext,false);}else{async=true;}if(async){d.onReady(function(){f.jstlAsync({data:b.extend({},e)});});return c.preventChilds().finish();}}}Preprocessor.__appendEvents(f);f.trigger(de.titus.jstl.Constants.EVENTS.onLoad,[e,d]);c.nextTask();},__appendEvents:function(c){if(c.attr("jstl-load")){c.one(de.titus.jstl.Constants.EVENTS.onLoad,function(d,f,e){Preprocessor.STATICEVENTHANDLER(c.attr("jstl-load"),d,f,e);});}if(c.attr("jstl-success")){c.one(de.titus.jstl.Constants.EVENTS.onSuccess,function(d,f,e){Preprocessor.STATICEVENTHANDLER(c.attr("jstl-success"),d,f,e);});}}};de.titus.jstl.TaskRegistry.append("preprocessor",de.titus.jstl.Constants.PHASE.INIT,undefined,de.titus.jstl.functions.Preprocessor.TASK);});})($,de.titus.jstl.GlobalSettings);(function(b,a){de.titus.core.Namespace.create("de.titus.jstl.functions.ScreenCondition",function(){let ScreenCondition=de.titus.jstl.functions.ScreenCondition={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.ScreenCondition"),TASK:function(f,e,d,c){if(ScreenCondition.LOGGER.isDebugEnabled()){ScreenCondition.LOGGER.logDebug("TASK");}if(typeof f.attr("jstl-screen-condition-init")==="undefined"){f.addClass("jstl-screen-inactive");de.titus.core.ScreenObserver.addHandler({"condition":f.attr("jstl-screen-condition"),"activate":function(g){if(ScreenCondition.LOGGER.isDebugEnabled()){ScreenCondition.LOGGER.logDebug("run jstl screen condition (activate)");}if(!f.is(".jstl-ready")){f.jstl({"data":e,"callback":function(){f.removeClass("jstl-screen-inactive");f.addClass("jstl-screen-active");}});}else{f.removeClass("jstl-screen-inactive");f.addClass("jstl-screen-active");
}},"deactivate":function(g){if(ScreenCondition.LOGGER.isDebugEnabled()){ScreenCondition.LOGGER.logDebug("run jstl screen condition (deactivate)");}f.removeClass("jstl-screen-active");f.addClass("jstl-screen-inactive");}});f.attr("jstl-screen-condition-init","");c.finish();}else{c.nextTask();}}};de.titus.jstl.TaskRegistry.append("screenCondition",de.titus.jstl.Constants.PHASE.INIT,"[jstl-screen-condition]",de.titus.jstl.functions.ScreenCondition.TASK);});})($,de.titus.jstl.GlobalSettings);(function(a){de.titus.core.Namespace.create("de.titus.jstl.functions.Choose",function(){let Choose=de.titus.jstl.functions.Choose={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.Choose"),TASK:function(e,d,c,b){if(Choose.LOGGER.isDebugEnabled()){Choose.LOGGER.logDebug("execute run("+e+", "+d+", "+c+")");}let expression=e.attr("jstl-choose");if(typeof expression!=="undefined"){Choose.__compute(e,d,c,c.resolver);b.preventChilds();}b.nextTask();},__compute:function(c,f,e,d){if(Choose.LOGGER.isDebugEnabled()){Choose.LOGGER.logDebug("execute processChilds("+c+", "+f+", "+e+", "+d+")");}var b=false;c.children().each(function(){var g=a(this);if(!b&&Choose.__computeChild(c,g,f,e,d)){if(Choose.LOGGER.isTraceEnabled()){Choose.LOGGER.logTrace("compute child: "+g);}e.compute(g,f);b=true;}else{if(Choose.LOGGER.isTraceEnabled()){Choose.LOGGER.logTrace("remove child: "+g);}g.remove();}});},__computeChild:function(b,f,e,d,c){if(Choose.LOGGER.isDebugEnabled()){Choose.LOGGER.logDebug("execute processChild("+b+", "+f+", "+e+", "+d+", "+c+")");}if(Choose.__computeWhen(b,f,e,d,c)){return true;}else{if(Choose.__computeOtherwise(b,f,e,d,c)){return true;}else{return false;}}},__computeWhen:function(b,f,e,d,c){if(Choose.LOGGER.isDebugEnabled()){Choose.LOGGER.logDebug("execute processWhenElement("+b+", "+f+", "+e+", "+d+", "+c+")");}let expression=f.attr("jstl-when");if(typeof expression!=="undefined"){return c.resolveExpression(expression,e,false);}return false;},__computeOtherwise:function(b,f,e,d,c){if(Choose.LOGGER.isDebugEnabled()){Choose.LOGGER.logDebug("execute processOtherwiseElement("+b+", "+f+", "+e+", "+d+", "+c+")");}if(typeof f.attr("jstl-otherwise")!=="undefined"){return true;}return false;}};de.titus.jstl.TaskRegistry.append("choose",de.titus.jstl.Constants.PHASE.CONDITION,"[jstl-choose]",de.titus.jstl.functions.Choose.TASK);});})($);(function(b,a){de.titus.core.Namespace.create("de.titus.jstl.functions.Foreach",function(){let Foreach=de.titus.jstl.functions.Foreach={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.Foreach"),TASK:function(f,e,d,c){if(Foreach.LOGGER.isDebugEnabled()){Foreach.LOGGER.logDebug("execute run("+f+", "+e+", "+d+")");}let expression=f.attr("jstl-foreach");if(expression!==undefined){c.preventChilds();Foreach.__compute(expression,f,e,d,d.resolver,c);}else{c.nextTask();}},__compute:function(g,j,h,f,c,e){if(Foreach.LOGGER.isDebugEnabled()){Foreach.LOGGER.logDebug("execute __compute("+j+", "+h+", "+f+", "+c+")");}var d=Foreach.__template(j);if(typeof d!=="undefined"){j.empty();let varName=j.attr("jstl-foreach-var")||"itemVar";let statusName=j.attr("jstl-foreach-status")||"statusVar";if(g.length==0&&typeof j.attr("jstl-foreach-count")!=="undefined"){Foreach.__count(d,statusName,j,h,f,e);}else{let list=c.resolveExpression(g,h,undefined);if(Array.isArray(list)){Foreach.__list(list,d,varName,statusName,j,h,f,e);}else{if(typeof list==="object"){Foreach.__map(list,d,varName,statusName,j,h,f,e);}else{if(typeof list==="undefined"){Foreach.__map(h,d,varName,statusName,j,h,f,e);}else{e.nextTask();}}}}}},__count:function(g,k,h,e,f,m){var l=f.resolver.resolveExpression(h.attr("jstl-foreach-start-index"),e,0)||0;var j=f.resolver.resolveExpression(h.attr("jstl-foreach-count"));var d=typeof h.attr("jstl-foreach-step")!=="undefined"?f.resolver.resolveExpression(h.attr("jstl-foreach-step")):1;var c=new de.titus.jstl.ExecuteChain(m);for(let i=l;i<j;i+=d){let context={};context=b.extend(context,e);context[k]={"index":i,"count":j,"context":e};c.count++;Foreach.__computeContent(g.clone(),context,h,f,c);}},__list:function(g,j,d,l,k,e,f,n){var m=f.resolver.resolveExpression(k.attr("jstl-foreach-start-index"),e,0)||0;var h=k.attr("jstl-foreach-break-condition");var c=new de.titus.jstl.ExecuteChain(n,1);for(let i=m;i<g.length;i++){let context={};context=b.extend(context,e);context[d]=g[i];context[l]={"index":i,"number":(i+1),"count":g.length,"data":g,"context":e};if(h&&Foreach.__break(context,h,k,f)){return c.finish();}else{c.count++;Foreach.__computeContent(j.clone(),context,k,f,c);}}c.finish();},__map:function(m,h,d,l,j,e,f,n){var g=j.attr("jstl-foreach-break-condition");var c=new de.titus.jstl.ExecuteChain(n,1);var k=Object.getOwnPropertyNames(m);for(let i=0;i<k.length;i++){let name=k[i];let context={};context=b.extend(context,e);context[d]=m[name];context[l]={"index":i,"number":(i+1),"key":name,"data":m,"context":e};if(g&&Foreach.__break(context,g,j,f)){return c.finish();}else{c.count++;Foreach.__computeContent(h.clone(),context,j,f,c);}}c.finish();},__break:function(f,c,e,d){var g=d.resolver.resolveExpression(c,f,false);if(typeof g==="function"){g=g(e,f,d);}return g==true||g=="true";},__computeContent:function(g,f,e,d,c){g.appendTo(e);d.compute(g,f,function(){c.finish();});},__template:function(d){var c=d.data("de.titus.jstl.functions.Foreach.Template");if(typeof c==="undefined"){c=b("<jstl/>").append(d.contents());d.data("de.titus.jstl.functions.Foreach.Template",c);}return c;}};de.titus.jstl.TaskRegistry.append("foreach",de.titus.jstl.Constants.PHASE.MANIPULATION,"[jstl-foreach]",de.titus.jstl.functions.Foreach.TASK);});})($,de.titus.jstl.GlobalSettings);(function(a){de.titus.core.Namespace.create("de.titus.jstl.functions.Text",function(){let Text=de.titus.jstl.functions.Text={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.Text"),TASK:function(f,e,d,c){if(Text.LOGGER.isDebugEnabled()){Text.LOGGER.logDebug("execute run("+f+", "+e+", "+d+")");}let ignore=f.attr("jstl-text-ignore");if(typeof ignore==="undefined"){if(!de.titus.core.Page.getInstance().detectBrowser().other){Text.normalize(f[0]);}var b=f.attr("jstl-text-content-type")||"text";f.contents().filter(function(){return(this.nodeType===3||this.nodeType===4)&&this.textContent!=undefined&&this.textContent.trim()!="";}).each(function(){let text=this.textContent;if(text){text=d.resolver.resolveText(text,e);let contentFunction=Text.CONTENTTYPE[b];if(contentFunction){contentFunction(this,text,f,d,e);}}});}c.nextTask();},normalize:function(b){if(b){if(b.nodeType==3){var c=b.textContent;while(b.nextSibling&&b.nextSibling.nodeType==3){c+=b.nextSibling.textContent;b.parentNode.removeChild(b.nextSibling);}b.textContent=c;}else{Text.normalize(b.firstChild);}Text.normalize(b.nextSibling);}},CONTENTTYPE:{"html":function(b,c,f,d,e){a(b).replaceWith(a.parseHTML(c));},"json":function(b,c,f,d,e){if(typeof c==="string"){b.textContent=c;}else{b.textContent=JSON.stringify(c);}},"text":function(c,g,k,e,d){var h=g;var j=false;var f=k.attr("jstl-text-trim-length");if(f!=undefined&&f!=""){f=e.resolver.resolveExpression(f,d,"-1");f=parseInt(f);if(f&&f>0){h=de.titus.core.StringUtils.trimTextLength(h,f);}}var b=k.attr("jstl-text-prevent-format");if(b){b=e.resolver.resolveExpression(b,d,true)||true;if(b){h=de.titus.core.StringUtils.formatToHtml(h);j=true;}}if(j){a(c).replaceWith(a.parseHTML(h));}else{c.textContent=h;}}}};Text.CONTENTTYPE["text/html"]=Text.CONTENTTYPE["html"];Text.CONTENTTYPE["application/json"]=Text.CONTENTTYPE["json"];Text.CONTENTTYPE["text/plain"]=Text.CONTENTTYPE["text"];de.titus.jstl.TaskRegistry.append("text",de.titus.jstl.Constants.PHASE.CONTENT,undefined,de.titus.jstl.functions.Text.TASK);});})($);(function(a){de.titus.core.Namespace.create("de.titus.jstl.functions.Attribute",function(){let Attribute=de.titus.jstl.functions.Attribute={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.Attribute"),TASK:function(h,g,d,c){if(Attribute.LOGGER.isDebugEnabled()){Attribute.LOGGER.logDebug("execute run("+h+", "+g+", "+d+")");}let attributes=h[0].attributes||[];for(var b=0;b<attributes.length;b++){let name=attributes[b].name;if(name.indexOf("jstl-")!=0){let value=attributes[b].value;if(value!=undefined&&value!=""){try{let newValue=d.resolver.resolveText(value,g);if(value!=newValue){if(Attribute.LOGGER.isDebugEnabled()){Attribute.LOGGER.logDebug('Change attribute "'+name+'" from "'+value+'" to "'+newValue+'"!');}h.attr(name,newValue);}}catch(f){Attribute.LOGGER.logError("Can't process attribute\""+name+'" with value "'+value+'"!');}}}}c.nextTask();}};de.titus.jstl.TaskRegistry.append("attribute",de.titus.jstl.Constants.PHASE.CONTENT,undefined,de.titus.jstl.functions.Attribute.TASK);});})($);(function(b,a){de.titus.core.Namespace.create("de.titus.jstl.functions.Data",function(){let Data=de.titus.jstl.functions.Data={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.Data"),TASK:function(f,e,d,c){if(Data.LOGGER.isDebugEnabled()){Data.LOGGER.logDebug("TASK");}let expression=f.attr("jstl-data");if(typeof expression!=="undefined"){let varname=f.attr("jstl-data-var");let defaultValue=Data.__defaultvalue(f,expression,e,d);let mode=f.attr("jstl-data-mode")||"direct";Data.MODES[mode](expression,defaultValue,f,varname,e,d,c);}else{c.nextTask();}},__defaultvalue:function(e,f,d,c){let defaultExpression=e.attr("jstl-data-default");if(typeof defaultExpression==="undefined"){return f;}else{if(defaultExpression.length==0){return undefined;}else{return c.resolver.resolveExpression(defaultExpression,d,f);}}},__options:function(e,d,c){let options=e.attr("jstl-data-options");if(options){options=c.resolver.resolveText(options,d);options=c.resolver.resolveExpression(options,d);return options;}},__updateContext:function(d,c,e){if(c){if(!d){e.updateContext(c,true);}else{e.context[d]=c;}}},MODES:{"direct":function(j,h,g,c,f,e,d){let data=e.resolver.resolveExpression(j,f,h);
Data.__updateContext(c,data,d);d.nextTask();},"remote":function(j,h,g,c,f,e,d){let url=e.resolver.resolveText(j,f);url=de.titus.core.Page.getInstance().buildUrl(url);let option=Data.__options(g,f,e);let datatype=(g.attr("jstl-data-datatype")||"json").toLowerCase();let ajaxSettings={"url":url,"async":true,"cache":false,"dataType":datatype,"success":function(k,m,l){Data.__remoteResponse(c,datatype,d,ajaxSettings,k,m,l);},"error":function(l,m,k){Data.__remoteError(g,d,ajaxSettings,l,m,k);}};if(option){ajaxSettings=b.extend(ajaxSettings,option);}b.ajax(ajaxSettings);},"url-parameter":function(j,h,g,c,f,e,d){let parameterName=e.resolver.resolveText(j,f,j);let data=de.titus.core.Page.getInstance().getUrl().getParameter(parameterName);if(typeof data!=="undefined"){Data.__updateContext(c,data,d);}else{if(typeof h!=="undefined"){Data.__updateContext(c,h,d);}}d.nextTask();}},CONTENTYPE:{"xml":de.titus.core.Converter.xmlToJson,"json":function(c){return c;}},__remoteResponse:function(g,j,h,c,d,f,e){if(Data.LOGGER.isDebugEnabled()){Data.LOGGER.logDebug(['add remote data "',d,' as var "',g,'" as datatype "',j,'" -> (request: "',c,'", response: "',e,'")']);}Data.__updateContext(g,Data.CONTENTYPE[j](d),h);h.nextTask();},__remoteError:function(h,g,c,e,f,d){Data.LOGGER.logError(['jstl-data error at element "',h,'" -> request: "',c,'", response: "',e,'", state: "',f,'" error: "',d,'"!']);g.finish();}};de.titus.jstl.TaskRegistry.append("data",de.titus.jstl.Constants.PHASE.CONTEXT,"[jstl-data]",de.titus.jstl.functions.Data.TASK);});})($,de.titus.jstl.GlobalSettings);(function(b,a){de.titus.core.Namespace.create("de.titus.jstl.functions.Include",function(){let Include=de.titus.jstl.functions.Include={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.Include"),CACHE:{},TASK:function(f,e,d,c){if(Include.LOGGER.isDebugEnabled()){Include.LOGGER.logDebug("execute run("+f+", "+e+", "+d+")");}let expression=f.attr("jstl-include");if(typeof expression!=undefined){Include.__compute(expression,f,e,d,c);}else{c.nextTask();}},__cacheCallback:function(g,e,f,d,c){Include.__include(g,c,e,f,d);},__executeCacheCallback:function(d,c){Include.CACHE[d]={"template":b("<jstl/>").append(c),"onload":false};let cache=Include.CACHE[d];for(let i=0;i<cache.callback.length;i++){cache.callback[i](cache.template);}},__compute:function(c,g,f,e,d){let url=e.resolver.resolveText(c,f);url=Include.__buildUrl(url);let disableCaching=url.indexOf("?")>=0||typeof g.attr("jstl-include-cache-disabled")!=="undefined";let cache=undefined;if(!disableCaching){cache=Include.CACHE[url];}if(cache){if(cache.onload){cache.callback.push(function(h){Include.__cacheCallback(g,e,f,d,h);});}else{Include.__include(g,cache.template,e,f,d);}}else{cache=Include.CACHE[url]={onload:true,callback:[function(h){Include.__cacheCallback(g,e,f,d,h);}]};ajaxSettings=b.extend({"url":url,"async":true,"cache":(typeof g.attr("jstl-include-ajax-cache-disabled")==="undefined"),"dataType":"html"},Include.__options(g,f,e));ajaxSettings.success=function(h){Include.__executeCacheCallback(url,h);};ajaxSettings.error=function(j,k,h){Include.__remoteError(g,d,ajaxSettings,j,k,h);};b.ajax(ajaxSettings);}},URLPATTERN:new RegExp("^((https?://)|/).*","i"),__buildUrl:function(c){let url=c;if(!Include.URLPATTERN.test(c)){url=a.DEFAULT_INCLUDE_BASEPATH+c;}url=de.titus.core.Page.getInstance().buildUrl(url);if(Include.LOGGER.isDebugEnabled()){Include.LOGGER.logDebug('execute __buildUrl("'+c+'") -> result: '+url);}return url;},__options:function(e,d,c){let options=e.attr("jstl-include-options");if(options){options=c.resolver.resolveText(options,d);options=c.resolver.resolveExpression(options,d);return options;}},__mode:function(e,d,c){let mode=e.attr("jstl-include-mode");if(mode==undefined){return"replace";}mode=mode.toLowerCase();if(mode=="append"||mode=="replace"||mode=="prepend"){return mode;}return"replace";},__include:function(g,c,e,f,d){if(Include.LOGGER.isDebugEnabled()){Include.LOGGER.logDebug("execute __include()");}let content=c.clone();let includeMode=Include.__mode(g,f,e);if(includeMode=="replace"){g.empty();content.appendTo(g);}else{if(includeMode=="append"){content.appendTo(g);}else{if(includeMode=="prepend"){content.prependTo(g);}}}d.nextTask();},__remoteError:function(h,g,c,e,f,d){Include.LOGGER.logError(['jstl-include error at element "',h,'" -> request: "',c,'", response: "',e,'", state: "',f,'" error: "',d,'"!']);g.finish();}};de.titus.jstl.TaskRegistry.append("include",de.titus.jstl.Constants.PHASE.MANIPULATION,"[jstl-include]",de.titus.jstl.functions.Include.TASK);});})($,de.titus.jstl.GlobalSettings);(function(a){de.titus.core.Namespace.create("de.titus.jstl.functions.AddAttribute",function(){var b=de.titus.jstl.functions.AddAttribute={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.AddAttribute"),TASK:function(f,e,d,c){if(b.LOGGER.isDebugEnabled()){b.LOGGER.logDebug("execute run("+f+", "+e+", "+d+")");}var g=f.attr("jstl-add-attribute");if(g){g=d.resolver.resolveExpression(g,e,false);if(g&&typeof g==="function"){g=g(f,e,d);}if(g&&Array.isArray(g)){b.processArray(g,f,e,d);}else{if(g&&typeof g==="object"){b.processObject(g,f,e,d);}}}c.nextTask();},processArray:function(d,g,f,e){for(var c=0;c<d.length;c++){b.processObject(d[c],g,f,e);}},processObject:function(c,f,e,d){if(c.name){f.attr(c.name,c.value);}else{b.LOGGER.logError("run processObject ("+c+", "+f+", "+e+", "+d+") -> No attribute name defined!");}}};de.titus.jstl.TaskRegistry.append("add-attribute",de.titus.jstl.Constants.PHASE.CONTENT,"[jstl-add-attribute]",de.titus.jstl.functions.AddAttribute.TASK);});})($);(function(a){de.titus.core.Namespace.create("de.titus.jstl.functions.Databind",function(){var b=de.titus.jstl.functions.Databind={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.Databind"),TASK:function(h,g,f,e){if(b.LOGGER.isDebugEnabled()){b.LOGGER.logDebug("execute run("+h+", "+g+", "+f+")");}var c=h.attr("jstl-databind-name");if(c&&c.trim()!=""){var d=b.__value(h,g,f);if(d!=undefined){h.data(c,d);}}e.nextTask();},__value:function(e,d,c){return c.resolver.resolveExpression(e.attr("jstl-databind"),d,undefined);}};de.titus.jstl.TaskRegistry.append("databind",de.titus.jstl.Constants.PHASE.BINDING,"[jstl-databind]",de.titus.jstl.functions.Databind.TASK);});})($);(function(a){de.titus.core.Namespace.create("de.titus.jstl.functions.Eventbind",function(){var b=de.titus.jstl.functions.Eventbind={LOGGER:de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.functions.Eventbind"),TASK:function(f,e,d,c){if(b.LOGGER.isDebugEnabled()){b.LOGGER.logDebug("execute run("+f+", "+e+", "+d+")");}if(f.attr("jstl-eventbind")!=undefined){f.de_titus_core_EventBind(e);}c.nextTask();}};de.titus.jstl.TaskRegistry.append("eventbind",de.titus.jstl.Constants.PHASE.BINDING,"[jstl-eventbind]",de.titus.jstl.functions.Eventbind.TASK);});})($);(function(b,c,a){de.titus.core.Namespace.create("de.titus.jstl.Processor",function(){var d=function(g,f,e){this.element=g;this.parent=this.element.parent();this.context=f||{};this.callback=e;this.resolver=new de.titus.core.ExpressionResolver(this.element.data("jstlExpressionRegex"));};d.LOGGER=de.titus.logging.LoggerFactory.getInstance().newLogger("de.titus.jstl.Processor");d.prototype.compute=function(g,f,e){if(d.LOGGER.isDebugEnabled()){d.LOGGER.logDebug(['execute compute("',g,'", "',f,'")']);}if(!g){this.element.removeClass("jstl-ready");this.element.addClass("jstl-running");this.element.trigger(de.titus.jstl.Constants.EVENTS.onStart,[f,this]);this.__computeElement(this.element,this.context,true,this.callback);}else{this.__computeElement(g,f,false,e);}};d.prototype.__computeElement=function(h,g,f,e){if(d.LOGGER.isDebugEnabled()){d.LOGGER.logDebug(["__computeElement() -> root: ",f,'"']);}let self=this;let taskChain=new de.titus.jstl.TaskChain(h,g,this,f,function(k,j){self.__computeFinished(f,e,k,j);});taskChain.nextTask();};d.prototype.__computeFinished=function(f,e,j,h){if(d.LOGGER.isDebugEnabled()){d.LOGGER.logDebug("__computeFinished() -> is root: "+f);}if(typeof e==="function"){e(j,h,this,f);}var g=j.tagName();if((g=="x-jstl"||g=="jstl")&&j.contents().length>0){j.replaceWith(j.contents());}if(f){this.context=h;this.onReady();}};d.prototype.onReady=function(e){if(d.LOGGER.isDebugEnabled()){d.LOGGER.logDebug("onReady()");}if(e){this.element.one(de.titus.jstl.Constants.EVENTS.onReady,function(f){e(f.delegateTarget,f.data);});return this;}else{let self=this;setTimeout(function(){self.element.removeClass("jstl-running");self.element.addClass("jstl-ready");self.element.trigger(de.titus.jstl.Constants.EVENTS.onReady,[self]);},a.DEFAULT_TIMEOUT_VALUE*10);}};de.titus.jstl.Processor=d;});})(jQuery,de.titus.core.SpecialFunctions,de.titus.jstl.GlobalSettings);de.titus.core.Namespace.create("de.titus.jstl.javascript.polyfills",function(){if(!Array.from){Array.from=(function(){var d=Object.prototype.toString;var e=function(g){return typeof g==="function"||d.call(g)==="[object Function]";};var c=function(h){var g=Number(h);if(isNaN(g)){return 0;}if(g===0||!isFinite(g)){return g;}return(g>0?1:-1)*Math.floor(Math.abs(g));};var b=Math.pow(2,53)-1;var a=function(h){var g=c(h);return Math.min(Math.max(g,0),b);};return function f(q){var g=this;var p=Object(q);if(q==null){throw new TypeError("Array.from requires an array-like object - not null or undefined");}var n=arguments.length>1?arguments[1]:void undefined;var j;if(typeof n!=="undefined"){if(!e(n)){throw new TypeError("Array.from: when provided, the second argument must be a function");}if(arguments.length>2){j=arguments[2];}}var o=a(p.length);var h=e(g)?Object(new g(o)):new Array(o);var l=0;var m;while(l<o){m=p[l];if(n){h[l]=typeof j==="undefined"?n(m,l):n.call(j,m,l);}else{h[l]=m;}l+=1;}h.length=o;return h;};}());}});(function(a){de.titus.core.Namespace.create("de.titus.jquery.jstl.plugin",function(){a.fn.jstl=function(b){if(this.length==0){return;}else{if(this.length>1){return this.each(function(){return a(this).jstl(b);
});}else{var c=this.data("de.titus.jstl.Processor");if(!c){var d=b||{};c=new de.titus.jstl.Processor(this,a.extend(true,{},d.data),d.callback||d.success);this.data("de.titus.jstl.Processor",c);}else{if(b){var d=b||{};if(d.data){c.context=a.extend(true,{},d.data);}if(typeof d.callback==="function"){c.callback=d.callback;}}}c.compute();return c;}}};a.fn.jstlAsync=function(d){if(this.length==0){return;}else{if(this.length>1){var b=[];this.each(function(){var e=a(this).jstlAsync(d);if(e){b.push(e);}});return b;}else{var c=this;setTimeout(function(){c.jstl(d);},1);return this;}}};a(document).ready(function(){a("[jstl-autorun]").jstlAsync();});});}(jQuery));
de.titus.core.Namespace.create("de.titus.jquery.plugins",function(){});
